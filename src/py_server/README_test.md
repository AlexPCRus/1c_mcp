# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ HTTP-—Å–µ—Ä–≤–∏—Å–∞ 1–° MCP API

–ú–æ–¥—É–ª—å `test_onec_service.py` –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ HTTP-—Å–µ—Ä–≤–∏—Å–∞ 1–° MCP API.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ —Ñ–∞–π–ª–µ `test_onec_service.py`:

```python
config = {
    'base_url': 'http://localhost/your_base_name',  # –í–∞—à URL –±–∞–∑—ã 1–°
    'username': 'admin',                           # –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    'password': 'password'                         # –ü–∞—Ä–æ–ª—å
}
```

### 2. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
cd src/py_server
python test_onec_service.py
```

## üìã –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è

### ‚úÖ Health Check
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ HTTP-—Å–µ—Ä–≤–∏—Å–∞
- Endpoint: `GET /hs/mcp/health`

### ‚úÖ –°–ø–∏—Å–æ–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤  
- –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- RPC –º–µ—Ç–æ–¥: `tools/list`
- –í—ã–≤–æ–¥–∏—Ç: –∏–º—è, –æ–ø–∏—Å–∞–Ω–∏–µ, —Å—Ö–µ–º—É –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### ‚úÖ –°–ø–∏—Å–æ–∫ —Ä–µ—Å—É—Ä—Å–æ–≤
- –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤  
- RPC –º–µ—Ç–æ–¥: `resources/list`
- –í—ã–≤–æ–¥–∏—Ç: –∏–º—è, URI, –æ–ø–∏—Å–∞–Ω–∏–µ, MIME-—Ç–∏–ø

### ‚úÖ –°–ø–∏—Å–æ–∫ –ø—Ä–æ–º–ø—Ç–æ–≤
- –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤
- RPC –º–µ—Ç–æ–¥: `prompts/list`  
- –í—ã–≤–æ–¥–∏—Ç: –∏–º—è, –æ–ø–∏—Å–∞–Ω–∏–µ, –∞—Ä–≥—É–º–µ–Ω—Ç—ã

### ‚úÖ –í—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ (–ø—Ä–∏–º–µ—Ä)
- –¢–µ—Å—Ç–æ–≤—ã–π –≤—ã–∑–æ–≤ –ø–µ—Ä–≤–æ–≥–æ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
- RPC –º–µ—Ç–æ–¥: `tools/call`
- –î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ñ–æ—Ä–º–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

## üìä –í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥
–¢–µ—Å—Ç—ã –≤—ã–≤–æ–¥—è—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å —ç–º–æ–¥–∑–∏ –∏ —Ü–≤–µ—Ç–æ–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π:
- ‚úÖ –£—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- ‚ùå –û—à–∏–±–∫–∏  
- ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- üè•üîßüìÅüí¨‚ö° –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–µ—Å—Ç–æ–≤

### JSON –æ—Ç—á–µ—Ç
–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª `test_results.json`:

```json
{
  "health": {
    "status": "success",
    "message": "–°–µ—Ä–≤–∏—Å –¥–æ—Å—Ç—É–ø–µ–Ω"
  },
  "tools": {
    "status": "success", 
    "count": 3,
    "tools": [
      {
        "name": "example_tool",
        "description": "–ü—Ä–∏–º–µ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞"
      }
    ]
  }
}
```

## üîß –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- Python 3.7+
- httpx
- mcp (–±–∏–±–ª–∏–æ—Ç–µ–∫–∞)

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:
```bash
pip install httpx mcp
```

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
```
‚ùå –û—à–∏–±–∫–∞ Health check: ConnectError
```
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –±–∞–∑—ã 1–° –∏ —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –æ–Ω–∞ –∑–∞–ø—É—â–µ–Ω–∞

### –û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏  
```
‚ùå –û—à–∏–±–∫–∞ Health check: 401 Unauthorized
```
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø–∞—Ä–æ–ª—å

### –û—à–∏–±–∫–∞ HTTP-—Å–µ—Ä–≤–∏—Å–∞
```
‚ùå –û—à–∏–±–∫–∞ Health check: 404 Not Found
```
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ HTTP-—Å–µ—Ä–≤–∏—Å `mcp_APIBackend` –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω –≤ 1–°

### JSON-RPC –æ—à–∏–±–∫–∏
```
‚ùå –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –º–µ—Ç–æ–¥: tools/list  
```
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –≤ –º–æ–¥—É–ª–µ 1–°

## üìù –ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞

```
üöÄ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è HTTP-—Å–µ—Ä–≤–∏—Å–∞ 1–° MCP API
============================================================

üè• –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Health endpoint...
‚úÖ Health check —É—Å–ø–µ—à–µ–Ω - —Å–µ—Ä–≤–∏—Å –¥–æ—Å—Ç—É–ø–µ–Ω

üîß –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤...
‚úÖ –ü–æ–ª—É—á–µ–Ω–æ 2 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤:
  1. file_reader
     –û–ø–∏—Å–∞–Ω–∏–µ: –ß–∏—Ç–∞–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–æ–≤
     –°—Ö–µ–º–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:
      {
        "type": "object",
        "properties": {
          "path": {
            "type": "string",
            "description": "–ü—É—Ç—å –∫ —Ñ–∞–π–ª—É"
          }
        }
      }

üìÅ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤...
‚úÖ –ü–æ–ª—É—á–µ–Ω–æ 1 —Ä–µ—Å—É—Ä—Å–æ–≤:
  1. –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏
     URI: onec://catalogs
     –û–ø–∏—Å–∞–Ω–∏–µ: –°–ø–∏—Å–æ–∫ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ —Å–∏—Å—Ç–µ–º—ã

üí¨ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø—Ä–æ–º–ø—Ç–æ–≤...
‚úÖ –ü–æ–ª—É—á–µ–Ω–æ 1 –ø—Ä–æ–º–ø—Ç–æ–≤:
  1. analyze_data
     –û–ø–∏—Å–∞–Ω–∏–µ: –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ
     –ê—Ä–≥—É–º–µ–Ω—Ç—ã (1):
       - data (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π): –î–∞–Ω–Ω—ã–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

‚ö° –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–∑–æ–≤–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞...
–¢–µ—Å—Ç–∏—Ä—É–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç: file_reader
‚úÖ –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤—ã–∑–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ:
  –†–µ–∑—É–ª—å—Ç–∞—Ç: –§–∞–π–ª —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—á–∏—Ç–∞–Ω

============================================================
üìä –ò–¢–û–ì–û–í–ê–Ø –°–í–û–î–ö–ê –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø
============================================================
–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤: 5
–£—Å–ø–µ—à–Ω—ã—Ö: 5
–ù–µ—É—Å–ø–µ—à–Ω—ã—Ö: 0

‚úÖ Health
   
‚úÖ Tools
   –ü–æ–ª—É—á–µ–Ω–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤: 2
   
‚úÖ Resources  
   –ü–æ–ª—É—á–µ–Ω–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤: 1
   
‚úÖ Prompts
   –ü–æ–ª—É—á–µ–Ω–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤: 1
   
‚úÖ Tool Call
   
============================================================
üìÑ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ test_results.json
```

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

–î–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç:

```bash
#!/bin/bash
# test_1c_service.sh

echo "–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ 1–° MCP API..."
cd src/py_server
python test_onec_service.py

if [ $? -eq 0 ]; then
    echo "‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ"
else  
    echo "‚ùå –ï—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å —Ç–µ—Å—Ç–∞–º–∏"
    exit 1
fi
``` 