# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ Streamable HTTP —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ –≤ Python MCP‚Äë–ø—Ä–æ–∫—Å–∏

## –ö—Ä–∞—Ç–∫–æ
- –°–µ–π—á–∞—Å –ø—Ä–æ–∫—Å–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ MCP: `stdio` –∏ `HTTP + SSE` (—Å–º. `src/py_server/stdio_server.py`, `src/py_server/http_server.py`).
- –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å —Ç—Ä–µ—Ç–∏–π –≤–∞—Ä–∏–∞–Ω—Ç ‚Äî Streamable HTTP (–ø–æ—Ç–æ–∫–æ–≤—ã–π HTTP), —Å–æ—Ö—Ä–∞–Ω–∏–≤ –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å SSE.
- –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ `mcp` –¥–æ –≤–µ—Ä—Å–∏–∏, –≤ –∫–æ—Ç–æ—Ä–æ–π –µ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–Ω—ã–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç Streamable HTTP.

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `mcp` (—Å–º. `src/py_server/requirements.txt`: `mcp>=1.0.0`).
- SSE —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —á–µ—Ä–µ–∑ `mcp.server.sse.SseServerTransport` –∏ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –≤ `FastAPI` –∫–∞–∫ –ø–æ–¥‚Äë–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Starlette –≤–Ω—É—Ç—Ä–∏ `src/py_server/http_server.py`:
  - `GET /mcp/sse` ‚Äî –ø–æ–¥–ø–∏—Å–∫–∞ SSE
  - `POST /mcp/messages` ‚Äî –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- `stdio` —Ä–µ–∂–∏–º –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `mcp.server.stdio.stdio_server()`.

## –ß—Ç–æ —Ç–∞–∫–æ–µ Streamable HTTP –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ MCP
- –î–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –ø–æ–≤–µ—Ä—Ö –æ–¥–Ω–æ–≥–æ HTTP‚Äë–∑–∞–ø—Ä–æ—Å–∞ –∑–∞ —Å—á—ë—Ç –ø–æ—Ç–æ–∫–æ–≤–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ (chunked transfer): –∫–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å, —Å–µ—Ä–≤–µ—Ä —Å—Ç—Ä–∏–º–∏—Ç –æ—Ç–≤–µ—Ç—ã/—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ —Ç–µ–ª–µ –æ—Ç–≤–µ—Ç–∞ –±–µ–∑ SSE.
- –ó–∞–º–µ–Ω—è–µ—Ç —Å–≤—è–∑–∫—É `GET(SSE)+POST(messages)` –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç—ã–º –µ–¥–∏–Ω—ã–º —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–º, –ª—É—á—à–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏/—Ñ–∞–π—Ä–≤–æ–ª—ã –∏ —É–ø—Ä–æ—â–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç—Å–∫—É—é —á–∞—Å—Ç—å.

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º
- –û–±–Ω–æ–≤–∏—Ç—å `mcp` –¥–æ –≤–µ—Ä—Å–∏–∏, –≤ –∫–æ—Ç–æ—Ä–æ–π –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å–µ—Ä–≤–µ—Ä–Ω—ã–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç Streamable HTTP. –£–∫–∞–∑–∞—Ç—å –≤–µ—Ä—Ö–Ω–µ—É—Ä–æ–≤–Ω–µ–≤—É—é —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é:
  - –í `src/py_server/requirements.txt` –∑–∞–º–µ–Ω–∏—Ç—å —Å—Ç—Ä–æ–∫—É
    - c: `mcp>=1.0.0`
    - –Ω–∞: `mcp>=<–∞–∫—Ç—É–∞–ª—å–Ω–∞—è_–≤–µ—Ä—Å–∏—è_—Å–æ_streamable_http>`
  - –¢–æ—á–Ω—ã–π –Ω–æ–º–µ—Ä –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ –≤ –≤–∞—à–µ–π —Å—Ä–µ–¥–µ. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é —Ä–µ–ª–∏–∑–∞ –≤–∞—à–µ–π –≤–µ—Ä—Å–∏–∏ `mcp` –∏ –∏–º–ø–æ—Ä—Ç—ã –≤–∏–¥–∞ `mcp.server.http` –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ.

## –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- –°–æ—Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–æ–≤:
  - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å SSE –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ (—Å—Ç–∞—Ä—ã–µ –∫–ª–∏–µ–Ω—Ç—ã).
  - –î–æ–±–∞–≤–∏—Ç—å Streamable HTTP –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –¥–ª—è –Ω–æ–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤.
- HTTP‚Äë—Å–ª–æ–π FastAPI/Starlette –º–æ–Ω—Ç–∏—Ä—É–µ—Ç –æ–±–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ –Ω–∞ —Ä–∞–∑–Ω—ã–µ –ø—É—Ç–∏:
  - SSE: `GET /mcp/sse`, `POST /mcp/messages`
  - Streamable HTTP: `POST /mcp/stream`
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è MCP‚Äë—Å–µ—Ä–≤–µ—Ä–∞ (`MCPProxy`) –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è; –º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–± –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ –∫ `server.run(read, write, init_opts)`.

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ (–ø–æ—à–∞–≥–æ–≤–æ)

1) `requirements.txt`
- –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å `mcp` –¥–æ –≤–µ—Ä—Å–∏–∏ —Å–æ Streamable HTTP (—Å–º. —Ä–∞–∑–¥–µ–ª ¬´–ò–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º¬ª).

2) `src/py_server/http_server.py`
- –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Streamable HTTP —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ —Ä—è–¥–æ–º —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º SSE.
- –ü—Ä–∏–º–µ—Ä–Ω—ã–π —à–∞–±–ª–æ–Ω (–∏–º–µ–Ω–∞ –∫–ª–∞—Å—Å–æ–≤/–º–µ—Ç–æ–¥–æ–≤ –º–æ–≥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –≤ –≤–∞—à–µ–π –≤–µ—Ä—Å–∏–∏ SDK; —Å–≤–µ—Ä—è–π—Ç–µ—Å—å —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π `mcp`):

```python
# –ù–æ–≤—ã–µ –∏–º–ø–æ—Ä—Ç—ã (–ø—Ä–∏–º–µ—Ä–Ω—ã–µ, –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ø–æ —Å–≤–æ–µ–π –≤–µ—Ä—Å–∏–∏ SDK)
from mcp.server.http import StreamableHTTPServerTransport  # –∏–ª–∏ –ø–æ—Ö–æ–∂–∏–π –∫–ª–∞—Å—Å

class MCPHttpServer:
    def __init__(self, config: Config):
        # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...
        self._mount_sse_app()
        self._mount_streamable_http_app()  # –Ω–æ–≤—ã–π –≤—ã–∑–æ–≤
        self._register_routes()

    def _mount_streamable_http_app(self):
        """–ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Streamable HTTP —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ MCP."""
        http_transport = StreamableHTTPServerTransport()

        async def handle_streamable_http(request):
            # –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ SSE: –ø–æ–ª—É—á–∞–µ–º Read/Write –ø–æ—Ç–æ–∫–∏ –æ—Ç —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ –∏ –∑–∞–ø—É—Å–∫–∞–µ–º MCP
            async with http_transport.connect(
                request.scope,
                request.receive,
                request._send,
            ) as (read_stream, write_stream):
                await self.mcp_proxy.server.run(
                    read_stream,
                    write_stream,
                    self.mcp_proxy.get_initialization_options(),
                )

        # –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ Streamable HTTP
        self.app.add_api_route(
            "/mcp/stream",
            endpoint=handle_streamable_http,
            methods=["POST"],
        )
```

- –ï—Å–ª–∏ –≤ –≤–∞—à–µ–π –≤–µ—Ä—Å–∏–∏ `mcp` —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≥–æ—Ç–æ–≤–æ–µ ASGI‚Äë–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ/—Ä–æ—É—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `http_transport.asgi_app()` –∏–ª–∏ `http_transport.create_starlette_routes()`), —Ç–æ –≤–º–µ—Å—Ç–æ —Ä—É—á–Ω–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –Ω–∞–ø—Ä—è–º—É—é –∏ –ø—Ä–æ—Å—Ç–æ –æ–±–µ—Ä–Ω—É—Ç—å –∑–∞–ø—É—Å–∫ `server.run(...)`:

```python
http_app = http_transport.asgi_app(lambda read, write: self.mcp_proxy.server.run(
    read, write, self.mcp_proxy.get_initialization_options()
))
self.app.mount("/mcp", http_app)  # —Ç–æ–≥–¥–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ç–æ—á–∫–∞ –±—É–¥–µ—Ç —á–µ–º‚Äë—Ç–æ –≤—Ä–æ–¥–µ /mcp/stream
```

- –ï—Å–ª–∏ –≤ –≤–∞—à–µ–π –≤–µ—Ä—Å–∏–∏ SDK –∫–ª–∞—Å—Å –∏ –º–µ—Ç–æ–¥—ã –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è –∏–Ω–∞—á–µ, —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –æ–±—â–∏–π —à–∞–±–ª–æ–Ω: —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –æ—Ç–¥–∞—ë—Ç –ø–∞—Ä—É –ø–æ—Ç–æ–∫–æ–≤ `(read, write)` –¥–ª—è `Server.run(...)`.

3) `src/py_server/main.py`
- –ù–∏—á–µ–≥–æ –º–µ–Ω—è—Ç—å –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ. HTTP‚Äë—Ä–µ–∂–∏–º –±—É–¥–µ—Ç –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å –∏ SSE, –∏ Streamable HTTP –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ñ–ª–∞–≥/–ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞:
  - Env: `MCP_HTTP_TRANSPORT=both|sse|streamable` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `both`).
  - –í `http_server.py` —É—Å–ª–æ–≤–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å `_mount_sse_app()` / `_mount_streamable_http_app()`.

4) `src/py_server/README.md`
- –î–æ–±–∞–≤–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ `POST /mcp/stream` –∏ –∫—Ä–∞—Ç–∫–∏–π —Ä–∞–∑–¥–µ–ª ¬´Streamable HTTP vs SSE¬ª.

5) –°–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞/–ø–æ–¥—Å–∫–∞–∑–∫–∏
- –û–±–Ω–æ–≤–∏—Ç—å `start_http_server.bat` –∏ –ª—é–±—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –Ω–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç:
  - `üîå Streamable HTTP –¥–ª—è MCP: http://127.0.0.1:8000/mcp/stream`

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –∏ –º–∏–≥—Ä–∞—Ü–∏—è
- –ù–∏—á–µ–≥–æ –Ω–µ —É–¥–∞–ª—è–µ–º: SSE –æ—Å—Ç–∞—ë—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º, –Ω–æ–≤—ã–µ –∫–ª–∏–µ–Ω—Ç—ã –º–æ–≥—É—Ç –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –Ω–∞ Streamable HTTP, —Å—Ç–∞—Ä—ã–µ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ SSE.
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (CORS, –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤) –æ—Å—Ç–∞—é—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ FastAPI/Starlette. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å `Origin`/`Host` –∏ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –ø—Ä–∏–≤—è–∑–∫—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫ `127.0.0.1`.

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ë–∞–∑–æ–≤—ã–π ¬´–¥—ã–º–æ–≤—ã–π¬ª —Ç–µ—Å—Ç HTTP‚Äë—Å–µ—Ä–≤–µ—Ä–∞: `GET /health` (–∫–∞–∫ —Å–µ–π—á–∞—Å).
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç Streamable HTTP (–ø—Å–µ–≤–¥–æ–∫–æ–¥, –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞):
  1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ `POST /mcp/stream`.
  2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å `initialize`/–∞–Ω–∞–ª–æ–≥ MCP‚Äë–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏.
  3. –ó–∞–ø—Ä–æ—Å–∏—Ç—å `tools/list` –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç.
- –î–ª—è —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–ª–∏–µ–Ω—Ç, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π Streamable HTTP (Cursor/Claude –≤ –≤–µ—Ä—Å–∏—è—Ö —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –Ω–æ–≤–æ–≥–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞), –Ω–∞–ø—Ä–∞–≤–∏–≤ –µ–≥–æ –Ω–∞ `http://127.0.0.1:8000/mcp/stream`.

## –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏
- –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∏–º—ë–Ω –∫–ª–∞—Å—Å–æ–≤/–º–µ—Ç–æ–¥–æ–≤ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ –≤ —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ä—Å–∏—è—Ö `mcp`. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ API –≤–∞—à–µ–π —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏ (–º–æ–¥—É–ª—å `mcp.server.http` –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π).
- –ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è/—Ç–∞–π–º–∞—É—Ç—ã –Ω–∞ –æ–±—Ä–∞—Ç–Ω—ã—Ö –ø—Ä–æ–∫—Å–∏ –ø—Ä–∏ chunked‚Äë–ø–µ—Ä–µ–¥–∞—á–µ (–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `nginx`, `traefik`, `cloudflare`). –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ –±–µ–∑ –ø—Ä–æ–∫—Å–∏, –∑–∞—Ç–µ–º —Å —Ü–µ–ª–µ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π.
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –±–∏–Ω–∞—Ä–Ω—ã—Ö —á–∞—Å—Ç–µ–π/—Ä–µ—Å—É—Ä—Å–æ–≤: –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ—Å—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π MCP SDK (–æ–±—ã—á–Ω–æ ‚Äî JSON‚Äë—Å–æ–æ–±—â–µ–Ω–∏—è, –±–æ–ª—å—à–∏–µ –±–∏–Ω–∞—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–µ URI/—Ä–µ—Å—É—Ä—Å—ã).

## –†–µ–∑—é–º–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –î–æ–±–∞–≤–ª—è–µ–º Streamable HTTP –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç, –º–æ–Ω—Ç–∏—Ä—É–µ–º –µ–≥–æ —Ä—è–¥–æ–º —Å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º SSE –±–µ–∑ –ª–æ–º–∫–∏ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.
- –û–±–Ω–æ–≤–ª—è–µ–º `mcp` –¥–æ –≤–µ—Ä—Å–∏–∏ —Å–æ Streamable HTTP.
- –í `http_server.py` –¥–æ–±–∞–≤–ª—è–µ–º `_mount_streamable_http_app()` –∏ —Ä–æ—É—Ç `POST /mcp/stream`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–∫–ª—é—á–∞–µ—Ç –ø–∞—Ä—ã –ø–æ—Ç–æ–∫–æ–≤ `(read, write)` –∫ `MCPProxy.server.run(...)`.
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ–º, —Ç–µ—Å—Ç—ã –¥–æ–ø–æ–ª–Ω—è–µ–º –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º —Å—Ü–µ–Ω–∞—Ä–∏–µ–º –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞.